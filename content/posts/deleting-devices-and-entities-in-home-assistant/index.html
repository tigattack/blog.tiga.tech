+++
draft = false
date = 2020-06-12T21:00:24+01:00
title = "Deleting Devices and Entities in Home Assistant"
description = "One of my major bugbears in Home Assistant has always been that there's no proper way to completely delete a device or entity.   However, that's not quite true..."
featuredImage = "header.png"
slug = "deleting-devices-and-entities-in-home-assistant"
authors = ["tigattack"]
tags = ["hass", "home assistant"]
categories = ["technology"]
series = []
+++

<p>One of my major bugbears in Home Assistant (HASS) has always been that there's no proper way to completely delete a device or entity.<br>
It seems so odd to me that there is just no functionality beyond &quot;disable&quot;.</p>
<p><em>Note: It's been pointed out to me that this is only true for entities which are available. For those which are marked &quot;unavailable&quot;, there is an option to delete. I will keep this up though because I'm sure it will still be useful for someone!</em></p>
<p>However, it's not <em>quite</em> true that there's no way to delete them... It is possible, but it can also be dangerous.</p>
<p>Entities and devices are stored in <code>/config/.storage/core.device_registry</code> and <code>core.entity_registry</code> respectively. Depending on the type, they have also have an entry in <code>core.config_entries</code>.</p>
<p>Below is the process to entirely remove a device and/or entity in Home Assistant.<br>
Please note that I cannot take any responsibility if you break your HASS installation.</p>
<h2 id="1backup">1. Backup.</h2>
<p>Make sure you have a backup or snapshot of HASS from before you make these changes.<br>
You can backup the entire machine it's running on, snapshot the VM (if it's on a VM), or take a snapshot in HASS's Supervisor tab.</p>
<h2 id="2shutdownhomeassistant">2. Shutdown Home Assistant.</h2>
<p>If you're running HassOS this may not be possible. I'm not familiar with the ins and outs of HassOS, having never used it myself.<br>
You could try editing these files and restarting HASS, but I can't guarantee it will work.</p>
<p>In general it's not a good idea to modify these core files while HASS is running. Since they aren't <em>supposed</em> to be user-modifiable, HASS doesn't expect them to be changed by anything other than itself and therefore may not handle it nicely if they are changed while it's running.</p>
<h2 id="3modifythefiles">3. Modify the files.</h2>
<p>There are many ways to access HASS's config while it's not running, but probably the easiest in most cases will be SSH.<br>
SSH to HASS's host system and locate your config directory. If you're running HASS in Docker, it will probably be: <code>/usr/share/hassio/homeassistant/</code><br>
Move to the <code>.storage</code> directory in your config directory and, with your choice of text editor, edit <code>core.device_registry</code>, <code>core.entity_registry</code>, and <code>core.config_entries</code>.<br>
In each one, search for references to the name of the device or entity you want to remove and delete the entire section for that object.</p>
<p><strong>Make sure you keep the syntax correct!</strong><br>
This is of the utmost importance. If you get this wrong, it <em>will</em> break.<br>
If you're unsure, paste the entire file into <a href="https://jsonlint.com/">JSON Lint</a> which will validate JSON syntax for you.</p>
<h2 id="4starthomeassistant">4. Start Home Assistant.</h2>
<p>With all luck, HASS will start back up without a care in the world, just the way it shut down but without those pesky entities you didn't want!</p>
<hr>
<p>I always welcome feedback on my posts, please <a href="https://blog.tiga.tech/about">contact me</a> if you have any. I'm also happy to answer any related questions if I know the answer.</p>

